<!-- https://jay23606.github.io/chat-gpt-voice/html/almost-cube.html -->

<!DOCTYPE html><html><head><title>Spinning Cube with WebGL</title><style>body{margin:0;}canvas{width:100vw;height:100vh;display:block;}</style></head><body><canvas id=glCanvas></canvas><script src=https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js></script><script>const canvas=document.querySelector("#glCanvas"),gl=canvas.getContext("webgl");gl.clearColor(1,1,1,1),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.enable(gl.CULL_FACE),gl.enable(gl.DEPTH_TEST);const vertexShaderSource="attribute vec4 a_position;attribute vec3 a_normal;uniform mat4 u_projectionMatrix;uniform mat4 u_modelViewMatrix;varying vec3 v_normal;void main(){gl_Position=u_projectionMatrix*u_modelViewMatrix*a_position;v_normal=mat3(u_modelViewMatrix)*a_normal;}",fragmentShaderSource="precision mediump float;varying vec3 v_normal;void main(){vec3 color=abs(normalize(v_normal));gl_FragColor=vec4(color,1);}";const vertexShader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vertexShader,vertexShaderSource),gl.compileShader(vertexShader);const fragmentShader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fragmentShader,fragmentShaderSource),gl.compileShader(fragmentShader);const program=gl.createProgram();gl.attachShader(program,vertexShader),gl.attachShader(program,fragmentShader),gl.linkProgram(program);const positionAttributeLocation=gl.getAttribLocation(program,"a_position"),normalAttributeLocation=gl.getAttribLocation(program,"a_normal"),projectionMatrixUniformLocation=gl.getUniformLocation(program,"u_projectionMatrix"),modelViewMatrixUniformLocation=gl.getUniformLocation(program,"u_modelViewMatrix");const positionBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);const positions=[.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,.5];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(positions),gl.STATIC_DRAW),gl.enableVertexAttribArray(positionAttributeLocation),gl.vertexAttribPointer(positionAttributeLocation,3,gl.FLOAT,!1,0,0);const normalBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,normalBuffer);const vertexNormals=[0,0,-1,0,0,1,0,1,0,0,-1,0,-1,0,0,1,0,1,0,0,-1,0];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertexNormals),gl.STATIC_DRAW),gl.enableVertexAttribArray(normalAttributeLocation),gl.vertexAttribPointer(normalAttributeLocation,3,gl.FLOAT,!1,0,0);const indices=[0,1,2,2,3,0,4,5,6,6,7,4,1,5,4,4,0,1,2,6,5,5,1,2,3,7,6,6,2,3,0,3,7,7,4,0],indexBuffer=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,indexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(indices),gl.STATIC_DRAW);const projectionMatrix=mat4.create(),fieldOfView=45*Math.PI/180,aspect=canvas.width/canvas.height,zNear=.1,zFar=100;mat4.perspective(projectionMatrix,fieldOfView,aspect,zNear,zFar);const modelViewMatrix=mat4.create();mat4.translate(modelViewMatrix,modelViewMatrix,[0,0,-4]);let then=0;function render(now){now*=.001;const deltaTime=now-then;then=now,gl.clearColor(1,1,1,1),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),mat4.rotate(modelViewMatrix,modelViewMatrix,deltaTime,[0,1,0]),gl.useProgram(program),gl.uniformMatrix4fv(projectionMatrixUniformLocation,!1,projectionMatrix),gl.uniformMatrix4fv(modelViewMatrixUniformLocation,!1,modelViewMatrix),gl.drawElements(gl.TRIANGLES,indices.length,gl.UNSIGNED_SHORT,0),requestAnimationFrame(render);}requestAnimationFrame(render);</script></body></html>
